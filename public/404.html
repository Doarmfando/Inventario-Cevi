<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P√°gina no encontrada - Inventario CEVICHERIA-NOEMI</title>
  <link rel="icon" type="image/svg+xml" href="/Inventario-Cevi/vite.svg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600;700&display=swap');
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .countdown { font-variant-numeric: tabular-nums; }
    .fade-in { animation: fadeIn 0.6s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .pulse { animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
  </style>
</head>
<body class="bg-white min-h-screen flex items-center justify-center">
  <div class="max-w-md mx-auto text-center p-8 fade-in">
    <div class="mb-8">
      <lottie-player
        id="lottie-animation"
        background="transparent"
        speed="1"
        style="width: 250px; height: 250px; margin: auto;"
        loop
        autoplay
      ></lottie-player>
      <!-- Mensaje de debug -->
      <p id="debug-message" class="text-xs text-gray-400 mt-2"></p>
    </div>
    <div class="mb-8">
      <p class="text-gray-600 text-lg mb-6">
        La p√°gina que buscas no existe o ha sido movida.
      </p>
      <p class="text-sm text-gray-500 mb-4">
        Ser√°s redirigido al inicio en <span id="countdown" class="font-bold text-blue-600 countdown">5</span> segundos...
      </p>
    </div>
    <div class="space-y-4">
      <button
        id="redirectBtn"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 pulse"
        onclick="redirectToHome()"
      >
        Ir al Inicio Ahora
      </button>
      <p class="text-xs text-gray-400">
        Sistema de Inventario CEVI
      </p>
    </div>
  </div>
  <script>
    // Detectar el entorno y configurar URLs
    function getEnvironmentConfig() {
      const hostname = window.location.hostname;
      const protocol = window.location.protocol;
      const pathname = window.location.pathname;
      
      // Archivo local (file://)
      if (protocol === 'file:') {
        return {
          environment: 'local_file',
          homeUrl: 'https://doarmfando.github.io/Inventario-Cevi/',
          animationPaths: [
            './404.json',                    // Mismo directorio
            '../404.json',                   // Directorio padre
            '404.json',                      // Relativo simple
            'https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json', // Chef cocinando online
            'https://assets1.lottiefiles.com/packages/lf20_mjlh3hcy.json', // Plato de comida online
            'https://assets2.lottiefiles.com/packages/lf20_t9gkkhz4.json'  // Original online
          ]
        };
      }
      
      // GitHub Pages
      if (hostname.includes('github.io') || hostname.includes('githubusercontent.com')) {
        return {
          environment: 'github_pages',
          homeUrl: 'https://doarmfando.github.io/Inventario-Cevi/',
          animationPaths: [
            '/Inventario-Cevi/404.json',     // GitHub Pages con base path
            './404.json',                    // Relativo
            '404.json',                      // Simple
            'https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json', // Chef cocinando online
            'https://assets1.lottiefiles.com/packages/lf20_mjlh3hcy.json', // Plato de comida online
            'https://assets2.lottiefiles.com/packages/lf20_t9gkkhz4.json'  // Original online
          ]
        };
      }
      
      // Desarrollo local (localhost)
      if (hostname === 'localhost' || hostname === '127.0.0.1') {
        return {
          environment: 'local_dev',
          homeUrl: window.location.origin,
          animationPaths: [
            '/404.json',                     // Desde ra√≠z Vite
            './404.json',                    // Relativo
            '404.json',                      // Simple
            'https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json', // Chef cocinando online
            'https://assets1.lottiefiles.com/packages/lf20_mjlh3hcy.json', // Plato de comida online
            'https://assets2.lottiefiles.com/packages/lf20_t9gkkhz4.json'  // Original online
          ]
        };
      }
      
      // Otros servidores (fallback)
      return {
        environment: 'other',
        homeUrl: window.location.origin,
        animationPaths: [
          './404.json',
          '404.json',
          'https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json',
          'https://assets1.lottiefiles.com/packages/lf20_mjlh3hcy.json',
          'https://assets2.lottiefiles.com/packages/lf20_t9gkkhz4.json'
        ]
      };
    }
    
    const config = getEnvironmentConfig();
    
    // Funci√≥n para cargar animaci√≥n
    function loadAnimation() {
      const player = document.getElementById('lottie-animation');
      const debugMessage = document.getElementById('debug-message');
      
      debugMessage.textContent = `üåê Entorno: ${config.environment}`;
      debugMessage.style.color = '#6b7280';
      
      let currentIndex = 0;
      let hasLoaded = false;
      
      function tryNextPath() {
        if (currentIndex >= config.animationPaths.length || hasLoaded) {
          if (!hasLoaded) {
            debugMessage.textContent = `‚ùå No se pudo cargar animaci√≥n (${config.environment})`;
            debugMessage.style.color = '#ef4444';
          }
          return;
        }
        
        const currentPath = config.animationPaths[currentIndex];
        const isOnline = currentPath.startsWith('http');
        
        debugMessage.textContent = `üîÑ [${config.environment}] Cargando: ${isOnline ? 'online' : currentPath}`;
        debugMessage.style.color = '#6b7280';
        
        // Timeout m√°s largo para archivos locales
        const timeoutDuration = isOnline ? 3000 : 1000;
        const timeout = setTimeout(() => {
          if (!hasLoaded) {
            currentIndex++;
            tryNextPath();
          }
        }, timeoutDuration);
        
        player.src = currentPath;
        
        const onReady = () => {
          clearTimeout(timeout);
          hasLoaded = true;
          debugMessage.textContent = `‚úÖ [${config.environment}] Cargado: ${isOnline ? 'online' : 'local'}`;
          debugMessage.style.color = '#10b981';
          setTimeout(() => {
            debugMessage.style.display = 'none';
          }, 3000);
          player.removeEventListener('ready', onReady);
        };
        
        const onError = () => {
          clearTimeout(timeout);
          if (!hasLoaded) {
            debugMessage.textContent = `‚ùå Error: ${isOnline ? 'online' : currentPath}`;
            debugMessage.style.color = '#ef4444';
            currentIndex++;
            setTimeout(() => tryNextPath(), 200);
          }
          player.removeEventListener('error', onError);
        };
        
        player.addEventListener('ready', onReady, { once: true });
        player.addEventListener('error', onError, { once: true });
      }
      
      tryNextPath();
    }
    
    function redirectToHome() {
      // En archivo local, abrir en nueva pesta√±a para evitar problemas
      if (config.environment === 'local_file') {
        window.open(config.homeUrl, '_blank');
      } else {
        window.location.href = config.homeUrl;
      }
    }
    
    // Inicializar cuando cargue la p√°gina
    window.addEventListener('load', loadAnimation);
    
    // Sistema de countdown
    let countdown = 5;
    const countdownElement = document.getElementById('countdown');
    const timer = setInterval(() => {
      countdown--;
      countdownElement.textContent = countdown;
      if (countdown <= 0) {
        clearInterval(timer);
        redirectToHome();
      }
    }, 1000);
    
    // Timeout de seguridad para redirecci√≥n
    setTimeout(() => {
      redirectToHome();
    }, 5000);
  </script>
</body>
</html>